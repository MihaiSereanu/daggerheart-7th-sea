<form class="flexcol {{cssClass}} item-sheet-card" autocomplete="off" style="position: relative; overflow: visible;">
    <div class="image-title-container">
        <img class="profile-img" src="{{data.img}}" data-edit="img" title="{{data.name}}" />
        <div class="card-header-text">
            <h1 class="item-title">
                <input name="name" type="text" value="{{data.name}}" placeholder="{{localize "DH.Name"}}" />
            </h1>
        </div>
    </div>

    {{!-- Card content area --}}
    <div class="item-card-content">
        {{!-- Weapon-specific fields --}}
        <div class="weapon-fields">
            {{!-- Category and Tier section --}}
            <div class="card-subtitle">
                <div class="category-tier-inputs">
                    <input type="text" name="system.category" value="{{systemData.category}}" placeholder="{{localize "DH.Category"}}" class="category-input"/>
                    <span class="separator">-</span>
                    <input type="text" name="system.tier" value="{{systemData.tier}}" placeholder="{{localize "DH.Tier"}} X" class="tier-input"/>
                </div>
            </div>

            {{!-- Weapon fields arranged in 2x2 grid --}}
            <div class="weapon-fields-grid">
                {{!-- Top row: Trait and Range --}}
                <div class="weapon-top-row">
                    <div class="weapon-dropdown-group">
                        <label>{{localize "DH.WeaponTrait"}}</label>
                        <select name="system.trait">
                            {{#each traitOptions}}
                            <option value="{{value}}" {{#if (eq ../systemData.trait value)}}selected{{/if}}>{{label}}</option>
                            {{/each}}
                        </select>
                    </div>

                    <div class="weapon-dropdown-group">
                        <label>{{localize "DH.WeaponRange"}}</label>
                        <select name="system.range">
                            {{#each rangeOptions}}
                            <option value="{{value}}" {{#if (eq ../systemData.range value)}}selected{{/if}}>{{label}}</option>
                            {{/each}}
                        </select>
                    </div>
                </div>

                {{!-- Bottom row: Damage and Damage Type --}}
                <div class="weapon-bottom-row">
                    <div class="weapon-damage-group">
                        <label>{{localize "DH.Damage"}}</label>
                        <div class="weapon-damage-display damage-value-display"
                             data-field="system.damage"
                             data-label="Weapon Damage"
                             data-has-modifiers="true"
                             data-edit-type="damage">
                            {{#if systemData.damage.value}}{{systemData.damage.value}}{{else}}{{#if systemData.damage.baseValue}}{{systemData.damage.baseValue}}{{else}}1d8{{/if}}{{/if}}
                        </div>
                    </div>

                    <div class="weapon-dropdown-group">
                        <label>{{localize "DH.DamageType"}}</label>
                        <select name="system.damageType">
                            {{#each damageTypeOptions}}
                            <option value="{{value}}" {{#if (eq ../systemData.damageType value)}}selected{{/if}}>{{label}}</option>
                            {{/each}}
                        </select>
                    </div>
                </div>
            </div>
        </div>

        {{!-- Description section --}}
        <div class="card-description">
            <div class="description-editor">
                {{editor descriptionHTML target="system.description" button=true editable=editable engine="prosemirror"}}
            </div>
        </div>
    </div>
</form> 